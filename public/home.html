<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Library NoSQL Â· Welcome</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <nav>
        <div class="brand">
            <div class="brand-title">Library NoSQL</div>
            <div class="brand-tagline">MongoDB-powered community catalog</div>
        </div>

        <div class="nav-section-label">Main</div>
        <div class="nav-links">
            <a href="index.html" class="active">
                <span class="icon">ğŸ </span>
                <span>Dashboard</span>
            </a>
            <a href="catalog.html">
                <span class="icon">ğŸ“š</span>
                <span>Book Catalog</span>
            </a>
            <a href="add-book.html">
                <span class="icon">â•</span>
                <span>Add New Book</span>
            </a>
            <a href="details.html">
                <span class="icon">ğŸ“</span>
                <span>Reviews &amp; Details</span>
            </a>
            <a href="profile.html">
                <span class="icon">ğŸ‘¤</span>
                <span>User Profile</span>
            </a>
        </div>

        <div class="nav-footer">
            <div>Welcome screen for your NoSQL demo UI.</div>
        </div>
    </nav>

    <main>
        <header class="page-header">
            <div class="page-meta">Welcome</div>
            <div class="page-title-row">
                <h1>Library NoSQL Demo UI</h1>
                <div class="actions">
                    <button class="btn btn-primary" onclick="window.location.href='add-book.html'">
                        Start by adding a book
                    </button>
                </div>
            </div>
            <p>
                A small but fully wired frontend that talks to your MongoDB-powered backend.
                Use it to demonstrate aggregation, document updates, and reference lookups.
            </p>
        </header>

        <section class="card-grid">
            <article class="card">
                <h2>Live aggregation snapshot</h2>
                <p class="muted-text">
                    Genre counts from <span class="pill">/api/stats/genres</span>.
                </p>
                <ul id="genre-list" class="stack muted-text" style="margin-top: 10px;">
                    <li>Loading aggregation resultsâ€¦</li>
                </ul>
            </article>

            <article class="card stack-lg">
                <h2>What you can show</h2>
                <ul class="stack muted-text">
                    <li>Â· Insert new documents via the <strong>Add New Book</strong> form.</li>
                    <li>Â· View and delete books in the <strong>Book Catalog</strong>.</li>
                    <li>Â· Demonstrate array operators from the <strong>Reviews &amp; Details</strong> page.</li>
                    <li>Â· Show reference data and <strong>$set</strong> updates on the <strong>User Profile</strong> page.</li>
                </ul>
            </article>
        </section>
    </main>

    <script>
        fetch('http://localhost:3000/api/stats/genres')
            .then((res) => res.json())
            .then((data) => {
                const list = document.getElementById('genre-list');
                if (!Array.isArray(data) || data.length === 0) {
                    list.innerHTML = '<li>No data yet. Try adding a book.</li>';
                    return;
                }
                list.innerHTML = data
                    .map((item) => `<li>${item._id || 'Uncategorized'}: ${item.count} book${item.count === 1 ? '' : 's'}</li>`)
                    .join('');
            })
            .catch(() => {
                const list = document.getElementById('genre-list');
                list.innerHTML = '<li>Unable to load data. Is your backend running?</li>';
            });
    </script>
</body>
</html>