<!DOCTYPE html>
<html>
<body>
    <nav><a href="index.html">Home</a> | <a href="search.html">Tags</a> | <a href="admin.html">Admin</a> | <a href="stats.html">Stats</a></nav>
    <h2>Library Insights</h2>
    <div id="s"></div>
    <script>
        async function load() {
            const res = await fetch('/api/stats');
            const data = await res.json();
            document.getElementById('s').innerHTML = data.map(i => `
                <div style="background:#eee; padding:10px; margin:5px">
                    <b>Status:</b> ${i._id} <br>
                    <b>Total Books:</b> ${i.total} <br>
                    <b>Average Popularity:</b> ${i.avgExchanges.toFixed(2)}
                </div>`).join('');
        }
        load();
    </script>
</body>
</html>